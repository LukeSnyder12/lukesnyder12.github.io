import Renderer from"/lib/Viz/2DRenderer.js";import FireWorkObject from"/lib/DSViz/FireWorkObject.js";import ParticleSystemObject from"/lib/DSViz/ParticleSystemObject.js";import StandardTextObject from"/lib/DSViz/StandardTextObject.js";async function init(){const e=document.createElement("canvas");e.id="renderCanvas",document.body.appendChild(e);const n=new Renderer(e);await n.init();const t=new ParticleSystemObject(n._device,n._canvasFormat);await n.appendSceneObject(t);var r,a=new StandardTextObject("fps: ??\nClick and drag to interact!\nq: push/pull\nw: firework"),i=0,o=16.666666666666668;let c=()=>{let e=Date.now()-r;e>o&&(++i,r=Date.now()-e%o,n.render()),requestAnimationFrame(c)};var d=!1,s=[],m=-1;return window.addEventListener("keydown",(e=>{switch(e.key){case"q":case"Q":m*=-1;break;case"w":case"W":var t=createFirework(n);s.push(t),console.log("fireworks!")}})),e.addEventListener("mousedown",(e=>{var n=e.clientX/window.innerWidth*2-1,r=-e.clientY/window.innerHeight*2+1;t.mouseInteraction(n,r,m),d=!0})),e.addEventListener("mousemove",(e=>{var n=e.clientX/window.innerWidth*2-1,r=-e.clientY/window.innerHeight*2+1;d&&t.mouseInteraction(n,r,m)})),e.addEventListener("mouseup",(e=>{d=!1})),r=Date.now(),c(),setInterval((()=>{a.updateText("fps: "+i+"\nClick and drag to interact!\nq: push/pull\nw: firework"),i=0}),1e3),n}async function createFirework(e){const n=2*Math.random()-1,t=2*Math.random()-1,r=new FireWorkObject(e._device,e._canvasFormat,n,t);return await e.appendSceneObject(r),r}init().then((e=>{console.log(e)})).catch((e=>{const n=document.createElement("p");n.innerHTML=navigator.userAgent+"</br>"+e.message,document.body.appendChild(n),document.getElementById("renderCanvas").remove()}));